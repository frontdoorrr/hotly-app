# PRD: 장소 저장, 태그, 위시리스트 관리

## 1. 기능 개요
**핵심 가치:** 추출된 장소 정보를 체계적으로 분류/관리하고, 개인 맞춤형 태그와 상태로 구성하여 데이트 계획에 즉시 활용 가능한 위시리스트를 제공한다.

**사용자 이점:** 흩어진 장소 정보를 통합 관리하여 언제든 원하는 장소를 빠르게 찾고 활용할 수 있다.

---

## 2. 페르소나(Persona)
**주 사용자:** 수진(29세, 디자이너)
- **맥락:** 인스타/블로그에서 발견한 카페/맛집을 저장했지만 카테고리별 정리가 안 되어 찾기 어려움
- **목표:** 저장한 장소를 카테고리별로 정리하고 방문 계획에 따라 상태 관리하여 효율적인 데이트 코스 계획 수립
- **동기:** 연인과의 특별한 데이트를 위해 다양한 장소 옵션을 체계적으로 관리하고 싶음
- **제약:** 너무 복잡한 분류는 부담, 태그가 많아지면 관리 어려움
- **성공 정의:** 3초 내 원하는 카테고리 장소 찾기, 월 20개 이상 장소 저장 및 활용

**핵심 Pain Points:**
1. **분류 혼재:** 카페/맛집/관광지가 뒤섞여 원하는 장소 찾기 어려움
2. **상태 불명확:** 가고 싶은 곳 vs 이미 간 곳 vs 즐겨찾기 구분 부재
3. **중복 저장:** 같은 장소를 여러 번 저장하여 리스트가 지저분해짐

---

## 3. 유저 스토리(User Stories)
- **장소 수집가**로서, 저장된 장소를 카테고리별로 자동 분류하고 싶다. 그래서 용도에 맞는 장소를 빠르게 찾는다.
- **계획 수립자**로서, 장소에 "가보고 싶음/방문 완료/즐겨찾기" 상태를 설정하고 싶다. 그래서 데이트 계획 시 적절한 후보를 선별한다.
- **개인화 추구자**로서, 나만의 태그(예: 조용한/인스타 감성/비싼)를 추가하고 싶다. 그래서 더 세밀한 검색과 필터링이 가능하다.
- **효율성 추구자**로서, 중복 장소 저장을 방지하고 기존 장소 정보를 업데이트하고 싶다. 그래서 깔끔한 리스트를 유지한다.

---

## 4. 유저 플로우(User Flow)

### 4-1. 장소 저장 플로우
1. **저장 트리거:** SNS 분석 완료 또는 수동 장소 추가
2. **중복 체크:** 동일 장소명+주소 기준으로 기존 저장 여부 확인
3. **중복 발견 시:** "이미 저장된 장소입니다" + 기존 정보 업데이트 옵션
4. **신규 저장 시:** 기본 카테고리 자동 분류 + 사용자 태그 추가 옵션
5. **저장 완료:** 위시리스트에 추가, 상태는 "가보고 싶음"으로 기본 설정

### 4-2. 분류 및 태그 관리 플로우
1. **카테고리 자동 분류:** AI 분석 결과 기반 (카페, 맛집, 관광지, 쇼핑, 문화시설)
2. **사용자 태그 추가:** 자유 입력 또는 기존 태그에서 선택
3. **태그 제안:** 유사 장소의 기존 태그 자동 제안
4. **일괄 편집:** 여러 장소 선택 후 공통 태그 추가/제거

### 4-3. 상태 관리 플로우
1. **기본 상태:** 가보고 싶음 (회색 하트)
2. **즐겨찾기:** 특히 가고 싶은 곳 (빨간 하트)
3. **방문 예정:** 구체적 방문 계획 있음 (파란 캘린더)
4. **방문 완료:** 이미 다녀온 곳 (초록 체크)
5. **상태 변경:** 장소 카드에서 원터치로 상태 전환

### 4-4. 에러/빈 상태 플로우
- **첫 저장:** "첫 장소를 저장해보세요" 가이드 + 링크 분석 유도
- **빈 카테고리:** "해당 카테고리 장소가 없습니다" + 다른 카테고리 추천
- **검색 결과 없음:** "검색 결과가 없습니다" + 태그/필터 조정 제안

---

## 5. 수용 기준(Acceptance Criteria)

| ID | 시나리오 | Given | When | Then |
|----|----------|-------|------|------|
| AC-01 | 자동 카테고리 분류 | 장소 정보가 분석됨 | 저장 시점에 | 카테고리가 자동 할당 (정확도 80% 이상) |
| AC-02 | 중복 방지 | 동일 장소가 이미 존재 | 중복 저장 시도 시 | 중복 알림 + 기존 정보 업데이트 옵션 제공 |
| AC-03 | 상태 변경 | 저장된 장소 존재 | 상태 아이콘 터치 시 | 1초 내 상태 변경 및 시각적 피드백 |
| AC-04 | 태그 추가 | 장소 상세 화면 | 태그 입력 시 | 기존 태그 자동완성 + 새 태그 생성 |
| AC-05 | 일괄 편집 | 여러 장소 선택 | 일괄 편집 실행 시 | 공통 작업(태그, 상태) 동시 적용 |
| AC-06 | 검색 성능 | 100개 이상 장소 저장 | 검색어 입력 시 | 500ms 내 결과 표시 |
| AC-07 | 카테고리 필터 | 다중 카테고리 장소 존재 | 카테고리 선택 시 | 해당 카테고리 장소만 즉시 필터링 |

---

## 6. 상충/의존성 점검(Conflict Matrix)

| 항목 | 잠재 충돌 | 정책/해결 |
|------|-----------|-----------|
| 자동 분류 vs 사용자 의도 | AI 분류와 사용자 기대 불일치 | 자동 분류 후 수동 변경 허용, 학습 데이터 축적 |
| 태그 증가 vs 관리 복잡성 | 태그가 많아질수록 선택 어려움 | 사용 빈도 기준 태그 정렬, 비활성 태그 자동 숨김 |
| 즐겨찾기 vs 방문 예정 | 상태 구분의 모호함 | 명확한 아이콘과 설명 제공, 사용자 교육 |
| 검색 vs 필터 | 동시 사용 시 결과 혼재 | 검색 우선 적용, 필터는 검색 결과 내 세부 필터링 |

---

## 7. 기능별 상세 명세

### 7-1. 카테고리 체계
```
기본 카테고리 (자동 분류):
├── 🍽️ 맛집 (레스토랑, 맛집, 술집)
├── ☕ 카페 (카페, 디저트, 베이커리)  
├── 🎪 관광지 (명소, 공원, 전망대)
├── 🛍️ 쇼핑 (쇼핑몰, 매장, 시장)
├── 🎨 문화시설 (박물관, 갤러리, 극장)
└── 🏃 액티비티 (스포츠, 레저, 체험)
```

### 7-2. 사용자 태그 예시
```
분위기: #조용한 #시끌벅적한 #로맨틱한 #힙한
가격대: #저렴한 #보통 #비싼 #가성비
특징: #인스타감성 #뷰맛집 #혼자가기좋은 #데이트코스
```

### 7-3. 데이터 스키마
```json
{
  "id": "string",
  "name": "string",
  "address": "string", 
  "category": "enum[맛집|카페|관광지|쇼핑|문화시설|액티비티]",
  "userTags": "string[]",
  "status": "enum[wishlist|favorite|planned|visited]",
  "addedAt": "timestamp",
  "visitedAt": "timestamp?",
  "memo": "string?",
  "rating": "number?",
  "imageUrl": "string"
}
```

### 7-4. 중복 감지 알고리즘
1. **정확 매칭:** 장소명 + 주소 완전 일치
2. **유사 매칭:** 레벤슈타인 거리 기반 (임계값: 0.8)
3. **좌표 매칭:** GPS 좌표 50m 반경 내 동일 간주

---

## 8. KPI / 측정 지표

### 8-1. 저장 및 관리
- **저장 성공률:** 장소 추가 시도 → 저장 완료 ≥ 95%
- **중복 방지율:** 중복 시도 중 감지된 비율 ≥ 90%
- **분류 정확도:** 자동 카테고리 분류 정확성 ≥ 80%

### 8-2. 사용성
- **검색 성공률:** 검색 시도 → 결과 클릭 ≥ 60%
- **태그 활용률:** 저장 장소 중 사용자 태그 보유 비율 ≥ 40%
- **상태 전환율:** 기본 상태 → 다른 상태 변경 비율 ≥ 30%

### 8-3. 참여도
- **위시리스트 크기:** 사용자당 평균 저장 장소 수 ≥ 15개
- **재방문률:** 저장 후 장소 상세 재조회 비율 ≥ 20%

---

## 9. UI/UX 가이드라인

### 9-1. 장소 카드 레이아웃
```
[이미지 썸네일] | 장소명
                | 카테고리 뱃지 | 사용자 태그들
                | 주소 (1줄)
                | [상태 아이콘] [더보기 버튼]
```

### 9-2. 상태별 시각적 구분
- **가보고 싶음:** 회색 하트 ♡
- **즐겨찾기:** 빨간 하트 ❤️  
- **방문 예정:** 파란 캘린더 📅
- **방문 완료:** 초록 체크 ✅

### 9-3. 필터 UI
- **상단 고정:** 카테고리 가로 스크롤 칩
- **하단 시트:** 태그, 상태별 다중 선택 필터

---

## 10. 접근성 / 국제화

### 10-1. 접근성
- **색맹 대응:** 상태별 아이콘 + 색상 조합으로 구분
- **스크린리더:** 모든 상태/태그에 음성 설명 제공
- **터치 영역:** 최소 44px, 카드 간 8px 여백

### 10-2. 국제화
- **카테고리명:** 다국어 번역 지원
- **사용자 태그:** 입력 언어 그대로 보존
- **정렬:** 언어별 문자 순서 적용

---

## 11. 용어 사전(Glossary)
- **위시리스트:** 저장된 모든 장소의 집합
- **카테고리:** 장소 유형별 기본 분류 (맛집, 카페 등)
- **사용자 태그:** 개인이 추가한 자유 형식 라벨
- **상태:** 장소에 대한 방문 계획/완료 단계
- **중복 감지:** 동일 장소의 재저장 방지 알고리즘

---

## 12. 기술 제약
- **저장소:** PostgreSQL (관계형 + JSONB)
- **검색 엔진:** PostgreSQL trigram + Elasticsearch (전문 검색)
- **이미지:** CDN 캐싱 (썸네일 자동 생성)
- **동기화:** 실시간 상태 업데이트

---

## Changelog
- 2025-01-XX: 초기 문서 작성 (작성자: Claude)