# PRD: SNS 링크 분석 및 장소 정보 추출

## 1. 기능 개요
**핵심 가치:** 사용자가 인스타그램, 유튜브 등 SNS 링크를 공유하면 AI가 콘텐츠를 분석하여 장소 정보를 자동 추출하고 구조화된 데이터로 저장한다.

**사용자 이점:** 수동 입력 없이 SNS에서 발견한 핫플/맛집을 즉시 저장하여 관리 부담을 최소화한다.

---

## 2. 페르소나(Persona)
**주 사용자:** 민지(26세, 마케터)
- **맥락:** 인스타그램에서 데이트 장소를 자주 발견하지만 스크린샷으로만 저장해두어 나중에 찾기 어려움
- **목표:** 링크만 공유하면 장소가 자동으로 정리되어 언제든 활용 가능한 위시리스트를 구축
- **동기:** 주말 데이트 계획을 효율적으로 세우고 싶음
- **제약:** 바쁜 직장 생활로 복잡한 입력 과정은 기피, 분석 결과가 틀리면 신뢰도 하락
- **성공 정의:** 링크 공유 후 30초 이내 정확한 장소 정보 획득, 월 10개 이상 장소 저장

**핵심 Pain Points:**
1. **정보 파편화:** 스크린샷/메모로 흩어져 있어 통합 관리 불가
2. **시간 소모:** 수동으로 장소명/주소/시간 등을 찾아 입력하는 번거로움  
3. **정확성 부족:** 잘못된 정보 입력으로 실제 방문 시 문제 발생

---

## 3. 유저 스토리(User Stories)
- **링크 공유자**로서, 인스타그램/유튜브 링크를 Hotly에 공유하면 장소 정보가 자동 추출되길 원한다. 그래서 수동 입력 시간을 절약한다.
- **링크 공유자**로서, 분석 중 실시간 진행 상황을 보고 싶다. 그래서 대기 시간에 대한 불안감을 해소한다.
- **링크 공유자**로서, 추출된 정보가 부정확하면 수정하고 싶다. 그래서 데이터 품질을 보장한다.
- **효율성 추구자**로서, 동일 링크는 즉시 결과를 받고 싶다. 그래서 반복 분석으로 인한 대기를 피한다.

---

## 4. 유저 플로우(User Flow)

### 4-1. 정상 플로우: 링크 분석 성공
1. **입력:** 사용자가 SNS 앱에서 "공유" → "Hotly" 선택 또는 Hotly 내에서 링크 입력
2. **URL 검증:** 시스템이 URL 형식 및 접근 가능성 확인
3. **캐시 조회:** 동일 URL 분석 결과 확인 (적중 시 → 7단계)
4. **콘텐츠 수집:** 웹 스크래핑/API를 통해 텍스트, 이미지, 메타데이터 획득
5. **AI 분석:** Gemini API로 장소명, 주소, 카테고리, 영업시간, 이미지 URL 추출
6. **데이터 검증:** 추출 결과의 완성도 및 신뢰도 평가
7. **결과 표시:** 장소 카드 형태로 정보 제공 + 수정/저장 옵션
8. **저장:** 사용자 확인 후 위시리스트에 추가, 캐시에 저장

### 4-2. 에러 플로우
- **잘못된 URL:** 형식 오류 시 입력 가이드 표시, 재입력 유도
- **접근 불가:** 비공개/삭제 콘텐츠 시 "분석 불가능" 메시지 + 수동 추가 옵션
- **분석 실패:** AI 추출 실패 시 재시도 버튼 + "직접 입력" 대안 제공
- **네트워크 오류:** 오프라인/타임아웃 시 나중에 다시 시도 알림

### 4-3. 빈 상태 플로우
- **첫 사용:** "링크를 공유해보세요" 가이드 + 예시 링크 제공
- **분석 중:** 로딩 애니메이션 + 진행률 표시 + 예상 소요 시간

---

## 5. 수용 기준(Acceptance Criteria)

| ID | 시나리오 | Given | When | Then |
|----|----------|-------|------|------|
| AC-01 | 캐시 적중 응답 | 동일 URL이 캐시에 존재 | 사용자가 링크 공유 | 1초 이내 분석 결과 표시 |
| AC-02 | 최초 분석 성공 | 유효한 인스타그램/유튜브 링크 | AI 분석 수행 | 30초 이내 장소 정보 추출 완료 |
| AC-03 | 필수 정보 추출 | 콘텐츠에 장소 정보 포함 | 분석 완료 시 | 장소명, 주소 중 최소 1개 추출 |
| AC-04 | 데이터 검증 | 추출된 정보 존재 | 결과 생성 시 | 신뢰도 점수 70% 이상 또는 검증 필요 플래그 표시 |
| AC-05 | 에러 처리 | 분석 불가능한 콘텐츠 | 분석 실패 시 | 구체적 실패 원인과 대안 제시 |
| AC-06 | 수동 보정 | 부정확한 추출 결과 | 사용자가 수정 버튼 클릭 | 편집 가능한 폼 제공, 저장 후 학습 데이터 축적 |
| AC-07 | 진행 상황 표시 | 분석 진행 중 | 대기 상태일 때 | 5초마다 진행률 업데이트, 30초 초과 시 지연 안내 |

---

## 6. 상충/의존성 점검(Conflict Matrix)

| 항목 | 잠재 충돌 | 정책/해결 |
|------|-----------|-----------|
| 캐시 vs 실시간성 | 오래된 캐시 vs 최신 정보 요구 | 캐시 TTL 7일, 백그라운드 갱신으로 최신성 보장 |
| AI 비용 vs 품질 | 빠른 응답 vs 정확도 향상 | 1차 빠른 분석 후 백그라운드에서 정밀 분석, 업데이트 시 알림 |
| 공유 방식 충돌 | OS 기본 공유 vs 인앱 링크 입력 | 두 방식 모두 지원, OS 공유를 우선 권장 |
| 개인정보 vs 분석 | 콘텐츠 수집 vs 프라이버시 | 분석용 최소 데이터만 임시 저장, 분석 완료 후 삭제 |

---

## 7. 기능별 상세 명세

### 7-1. 지원 플랫폼
- **1순위:** Instagram (게시물, 스토리, 릴스), YouTube (일반 영상, Shorts)
- **2순위:** 네이버 블로그, 카카오맵 공유 링크
- **추후 확장:** TikTok, 네이버 플레이스

### 7-2. 추출 정보 스키마
```json
{
  "placeName": "string (필수)",
  "address": "string (선택)",
  "category": "string[] (카페, 맛집, 관광지 등)",
  "businessHours": "string (선택)",
  "imageUrl": "string (대표 이미지)",
  "description": "string (50자 이내 요약)",
  "confidence": "number (0-1, 신뢰도)",
  "extractedAt": "timestamp"
}
```

### 7-3. 캐시 전략
- **키 구조:** `hotly:link_analysis:{url_hash}`
- **TTL:** 7일 (인기 링크는 자동 연장)
- **무효화:** 사용자 수동 갱신 요청, 분석 오류 신고 시

---

## 8. KPI / 측정 지표

### 8-1. 성능 지표
- **캐시 적중률:** ≥ 40% (동일 링크 재분석 방지)
- **분석 응답 시간:** 캐시 적중 p50 ≤ 1s, 미적중 p90 ≤ 30s
- **분석 성공률:** ≥ 85% (추출 가능한 콘텐츠 대상)

### 8-2. 품질 지표  
- **정확도:** 사용자 수정률 ≤ 20% (추출 정보의 정확성)
- **완성도:** 필수 정보(장소명 또는 주소) 추출률 ≥ 90%

### 8-3. 사용성 지표
- **전환율:** 분석 완료 → 저장 비율 ≥ 70%
- **재사용률:** 분석된 장소의 코스 활용률 ≥ 30%

---

## 9. 접근성 / 국제화

### 9-1. 접근성
- **시각:** 분석 진행 상태를 음성으로 안내, 이미지에 alt text 제공
- **청각:** 진행률을 시각적 프로그레스 바로 표시
- **조작:** 최소 터치 영역 44px, 한 손 조작 가능한 UI 배치

### 9-2. 국제화
- **언어:** 한국어, 영어 (추출된 장소명은 원문 유지)
- **주소 형식:** 국가별 주소 표기법 적용 (한국: 도로명/지번)
- **시간 형식:** 로컬 타임존 기준 24시간/12시간 선택

---

## 10. 용어 사전(Glossary)
- **링크 분석:** SNS URL에서 장소 관련 정보를 AI로 추출하는 과정
- **캐시 적중:** 이전 분석 결과를 재사용하여 즉시 응답하는 상태  
- **신뢰도:** AI 추출 결과의 정확성 예상 점수 (0-1)
- **장소 카드:** 추출된 정보를 시각적으로 정리한 UI 컴포넌트

---

## 11. 기술 제약
- **AI 모델:** Google Gemini Pro (텍스트 + 이미지 분석)
- **캐시:** Redis (분산 캐싱)
- **스크래핑:** 플랫폼별 API 우선, 불가 시 웹 스크래핑
- **처리량:** 동시 분석 요청 100건/분 제한

---

## Changelog
- 2025-01-XX: 초기 문서 작성 (작성자: Claude)